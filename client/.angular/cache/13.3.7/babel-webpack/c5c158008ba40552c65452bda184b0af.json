{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar _asyncToGenerator = require(\"C:\\\\Users\\\\Matth\\\\workspace\\\\angular-ecommerce\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\asyncToGenerator.js\").default;\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ElementHandle = exports.JSHandle = exports.createJSHandle = void 0;\n\nconst assert_js_1 = require(\"./assert.js\");\n\nconst helper_js_1 = require(\"./helper.js\");\n\nconst QueryHandler_js_1 = require(\"./QueryHandler.js\");\n\nconst environment_js_1 = require(\"../environment.js\");\n/**\n * @internal\n */\n\n\nfunction createJSHandle(context, remoteObject) {\n  const frame = context.frame();\n\n  if (remoteObject.subtype === 'node' && frame) {\n    const frameManager = frame._frameManager;\n    return new ElementHandle(context, context._client, remoteObject, frameManager.page(), frameManager);\n  }\n\n  return new JSHandle(context, context._client, remoteObject);\n}\n\nexports.createJSHandle = createJSHandle;\n/**\n * Represents an in-page JavaScript object. JSHandles can be created with the\n * {@link Page.evaluateHandle | page.evaluateHandle} method.\n *\n * @example\n * ```js\n * const windowHandle = await page.evaluateHandle(() => window);\n * ```\n *\n * JSHandle prevents the referenced JavaScript object from being garbage-collected\n * unless the handle is {@link JSHandle.dispose | disposed}. JSHandles are auto-\n * disposed when their origin frame gets navigated or the parent context gets destroyed.\n *\n * JSHandle instances can be used as arguments for {@link Page.$eval},\n * {@link Page.evaluate}, and {@link Page.evaluateHandle}.\n *\n * @public\n */\n\nclass JSHandle {\n  /**\n   * @internal\n   */\n  constructor(context, client, remoteObject) {\n    /**\n     * @internal\n     */\n    this._disposed = false;\n    this._context = context;\n    this._client = client;\n    this._remoteObject = remoteObject;\n  }\n  /** Returns the execution context the handle belongs to.\n   */\n\n\n  executionContext() {\n    return this._context;\n  }\n  /**\n   * This method passes this handle as the first argument to `pageFunction`.\n   * If `pageFunction` returns a Promise, then `handle.evaluate` would wait\n   * for the promise to resolve and return its value.\n   *\n   * @example\n   * ```js\n   * const tweetHandle = await page.$('.tweet .retweets');\n   * expect(await tweetHandle.evaluate(node => node.innerText)).toBe('10');\n   * ```\n   */\n\n\n  evaluate(pageFunction, ...args) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return yield _this.executionContext().evaluate(pageFunction, _this, ...args);\n    })();\n  }\n  /**\n   * This method passes this handle as the first argument to `pageFunction`.\n   *\n   * @remarks\n   *\n   * The only difference between `jsHandle.evaluate` and\n   * `jsHandle.evaluateHandle` is that `jsHandle.evaluateHandle`\n   * returns an in-page object (JSHandle).\n   *\n   * If the function passed to `jsHandle.evaluateHandle` returns a Promise,\n   * then `evaluateHandle.evaluateHandle` waits for the promise to resolve and\n   * returns its value.\n   *\n   * See {@link Page.evaluateHandle} for more details.\n   */\n\n\n  evaluateHandle(pageFunction, ...args) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      return yield _this2.executionContext().evaluateHandle(pageFunction, _this2, ...args);\n    })();\n  }\n  /** Fetches a single property from the referenced object.\n   */\n\n\n  getProperty(propertyName) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const objectHandle = yield _this3.evaluateHandle((object, propertyName) => {\n        const result = {\n          __proto__: null\n        };\n        result[propertyName] = object[propertyName];\n        return result;\n      }, propertyName);\n      const properties = yield objectHandle.getProperties();\n      const result = properties.get(propertyName) || null;\n      yield objectHandle.dispose();\n      return result;\n    })();\n  }\n  /**\n   * The method returns a map with property names as keys and JSHandle\n   * instances for the property values.\n   *\n   * @example\n   * ```js\n   * const listHandle = await page.evaluateHandle(() => document.body.children);\n   * const properties = await listHandle.getProperties();\n   * const children = [];\n   * for (const property of properties.values()) {\n   *   const element = property.asElement();\n   *   if (element)\n   *     children.push(element);\n   * }\n   * children; // holds elementHandles to all children of document.body\n   * ```\n   */\n\n\n  getProperties() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield _this4._client.send('Runtime.getProperties', {\n        objectId: _this4._remoteObject.objectId,\n        ownProperties: true\n      });\n      const result = new Map();\n\n      for (const property of response.result) {\n        if (!property.enumerable) continue;\n        result.set(property.name, createJSHandle(_this4._context, property.value));\n      }\n\n      return result;\n    })();\n  }\n  /**\n   * @returns Returns a JSON representation of the object.If the object has a\n   * `toJSON` function, it will not be called.\n   * @remarks\n   *\n   * The JSON is generated by running {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify | JSON.stringify}\n   * on the object in page and consequent {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse | JSON.parse} in puppeteer.\n   * **NOTE** The method throws if the referenced object is not stringifiable.\n   */\n\n\n  jsonValue() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this5._remoteObject.objectId) {\n        const response = yield _this5._client.send('Runtime.callFunctionOn', {\n          functionDeclaration: 'function() { return this; }',\n          objectId: _this5._remoteObject.objectId,\n          returnByValue: true,\n          awaitPromise: true\n        });\n        return helper_js_1.helper.valueFromRemoteObject(response.result);\n      }\n\n      return helper_js_1.helper.valueFromRemoteObject(_this5._remoteObject);\n    })();\n  }\n  /**\n   * @returns Either `null` or the object handle itself, if the object\n   * handle is an instance of {@link ElementHandle}.\n   */\n\n\n  asElement() {\n    /*  This always returns null, but subclasses can override this and return an\n        ElementHandle.\n    */\n    return null;\n  }\n  /**\n   * Stops referencing the element handle, and resolves when the object handle is\n   * successfully disposed of.\n   */\n\n\n  dispose() {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this6._disposed) return;\n      _this6._disposed = true;\n      yield helper_js_1.helper.releaseObject(_this6._client, _this6._remoteObject);\n    })();\n  }\n  /**\n   * Returns a string representation of the JSHandle.\n   *\n   * @remarks Useful during debugging.\n   */\n\n\n  toString() {\n    if (this._remoteObject.objectId) {\n      const type = this._remoteObject.subtype || this._remoteObject.type;\n      return 'JSHandle@' + type;\n    }\n\n    return 'JSHandle:' + helper_js_1.helper.valueFromRemoteObject(this._remoteObject);\n  }\n\n}\n\nexports.JSHandle = JSHandle;\n/**\n * ElementHandle represents an in-page DOM element.\n *\n * @remarks\n *\n * ElementHandles can be created with the {@link Page.$} method.\n *\n * ```js\n * const puppeteer = require('puppeteer');\n *\n * (async () => {\n *  const browser = await puppeteer.launch();\n *  const page = await browser.newPage();\n *  await page.goto('https://example.com');\n *  const hrefElement = await page.$('a');\n *  await hrefElement.click();\n *  // ...\n * })();\n * ```\n *\n * ElementHandle prevents the DOM element from being garbage-collected unless the\n * handle is {@link JSHandle.dispose | disposed}. ElementHandles are auto-disposed\n * when their origin frame gets navigated.\n *\n * ElementHandle instances can be used as arguments in {@link Page.$eval} and\n * {@link Page.evaluate} methods.\n *\n * If you're using TypeScript, ElementHandle takes a generic argument that\n * denotes the type of element the handle is holding within. For example, if you\n * have a handle to a `<select>` element, you can type it as\n * `ElementHandle<HTMLSelectElement>` and you get some nicer type checks.\n *\n * @public\n */\n\nclass ElementHandle extends JSHandle {\n  /**\n   * @internal\n   */\n  constructor(context, client, remoteObject, page, frameManager) {\n    super(context, client, remoteObject);\n    this._client = client;\n    this._remoteObject = remoteObject;\n    this._page = page;\n    this._frameManager = frameManager;\n  }\n\n  asElement() {\n    return this;\n  }\n  /**\n   * Resolves to the content frame for element handles referencing\n   * iframe nodes, or null otherwise\n   */\n\n\n  contentFrame() {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      const nodeInfo = yield _this7._client.send('DOM.describeNode', {\n        objectId: _this7._remoteObject.objectId\n      });\n      if (typeof nodeInfo.node.frameId !== 'string') return null;\n      return _this7._frameManager.frame(nodeInfo.node.frameId);\n    })();\n  }\n\n  _scrollIntoViewIfNeeded() {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      const error = yield _this8.evaluate( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (element, pageJavascriptEnabled) {\n          if (!element.isConnected) return 'Node is detached from document';\n          if (element.nodeType !== Node.ELEMENT_NODE) return 'Node is not of type HTMLElement'; // force-scroll if page's javascript is disabled.\n\n          if (!pageJavascriptEnabled) {\n            element.scrollIntoView({\n              block: 'center',\n              inline: 'center',\n              // @ts-expect-error Chrome still supports behavior: instant but\n              // it's not in the spec so TS shouts We don't want to make this\n              // breaking change in Puppeteer yet so we'll ignore the line.\n              behavior: 'instant'\n            });\n            return false;\n          }\n\n          const visibleRatio = yield new Promise(resolve => {\n            const observer = new IntersectionObserver(entries => {\n              resolve(entries[0].intersectionRatio);\n              observer.disconnect();\n            });\n            observer.observe(element);\n          });\n\n          if (visibleRatio !== 1.0) {\n            element.scrollIntoView({\n              block: 'center',\n              inline: 'center',\n              // @ts-expect-error Chrome still supports behavior: instant but\n              // it's not in the spec so TS shouts We don't want to make this\n              // breaking change in Puppeteer yet so we'll ignore the line.\n              behavior: 'instant'\n            });\n          }\n\n          return false;\n        });\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }(), _this8._page.isJavaScriptEnabled());\n      if (error) throw new Error(error);\n    })();\n  }\n\n  clickablePoint() {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      const [result, layoutMetrics] = yield Promise.all([_this9._client.send('DOM.getContentQuads', {\n        objectId: _this9._remoteObject.objectId\n      }).catch(helper_js_1.debugError), _this9._client.send('Page.getLayoutMetrics')]);\n      if (!result || !result.quads.length) throw new Error('Node is either not visible or not an HTMLElement'); // Filter out quads that have too small area to click into.\n      // Fallback to `layoutViewport` in case of using Firefox.\n\n      const {\n        clientWidth,\n        clientHeight\n      } = layoutMetrics.cssLayoutViewport || layoutMetrics.layoutViewport;\n      const quads = result.quads.map(quad => _this9._fromProtocolQuad(quad)).map(quad => _this9._intersectQuadWithViewport(quad, clientWidth, clientHeight)).filter(quad => computeQuadArea(quad) > 1);\n      if (!quads.length) throw new Error('Node is either not visible or not an HTMLElement'); // Return the middle point of the first quad.\n\n      const quad = quads[0];\n      let x = 0;\n      let y = 0;\n\n      for (const point of quad) {\n        x += point.x;\n        y += point.y;\n      }\n\n      return {\n        x: x / 4,\n        y: y / 4\n      };\n    })();\n  }\n\n  _getBoxModel() {\n    const params = {\n      objectId: this._remoteObject.objectId\n    };\n    return this._client.send('DOM.getBoxModel', params).catch(error => helper_js_1.debugError(error));\n  }\n\n  _fromProtocolQuad(quad) {\n    return [{\n      x: quad[0],\n      y: quad[1]\n    }, {\n      x: quad[2],\n      y: quad[3]\n    }, {\n      x: quad[4],\n      y: quad[5]\n    }, {\n      x: quad[6],\n      y: quad[7]\n    }];\n  }\n\n  _intersectQuadWithViewport(quad, width, height) {\n    return quad.map(point => ({\n      x: Math.min(Math.max(point.x, 0), width),\n      y: Math.min(Math.max(point.y, 0), height)\n    }));\n  }\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page.mouse} to hover over the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n\n\n  hover() {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this10._scrollIntoViewIfNeeded();\n      const {\n        x,\n        y\n      } = yield _this10.clickablePoint();\n      yield _this10._page.mouse.move(x, y);\n    })();\n  }\n  /**\n   * This method scrolls element into view if needed, and then\n   * uses {@link Page.mouse} to click in the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n\n\n  click(options = {}) {\n    var _this11 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this11._scrollIntoViewIfNeeded();\n      const {\n        x,\n        y\n      } = yield _this11.clickablePoint();\n      yield _this11._page.mouse.click(x, y, options);\n    })();\n  }\n  /**\n   * This method creates and captures a dragevent from the element.\n   */\n\n\n  drag(target) {\n    var _this12 = this;\n\n    return _asyncToGenerator(function* () {\n      assert_js_1.assert(_this12._page.isDragInterceptionEnabled(), 'Drag Interception is not enabled!');\n      yield _this12._scrollIntoViewIfNeeded();\n      const start = yield _this12.clickablePoint();\n      return yield _this12._page.mouse.drag(start, target);\n    })();\n  }\n  /**\n   * This method creates a `dragenter` event on the element.\n   */\n\n\n  dragEnter(data = {\n    items: [],\n    dragOperationsMask: 1\n  }) {\n    var _this13 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this13._scrollIntoViewIfNeeded();\n      const target = yield _this13.clickablePoint();\n      yield _this13._page.mouse.dragEnter(target, data);\n    })();\n  }\n  /**\n   * This method creates a `dragover` event on the element.\n   */\n\n\n  dragOver(data = {\n    items: [],\n    dragOperationsMask: 1\n  }) {\n    var _this14 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this14._scrollIntoViewIfNeeded();\n      const target = yield _this14.clickablePoint();\n      yield _this14._page.mouse.dragOver(target, data);\n    })();\n  }\n  /**\n   * This method triggers a drop on the element.\n   */\n\n\n  drop(data = {\n    items: [],\n    dragOperationsMask: 1\n  }) {\n    var _this15 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this15._scrollIntoViewIfNeeded();\n      const destination = yield _this15.clickablePoint();\n      yield _this15._page.mouse.drop(destination, data);\n    })();\n  }\n  /**\n   * This method triggers a dragenter, dragover, and drop on the element.\n   */\n\n\n  dragAndDrop(target, options) {\n    var _this16 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this16._scrollIntoViewIfNeeded();\n      const startPoint = yield _this16.clickablePoint();\n      const targetPoint = yield target.clickablePoint();\n      yield _this16._page.mouse.dragAndDrop(startPoint, targetPoint, options);\n    })();\n  }\n  /**\n   * Triggers a `change` and `input` event once all the provided options have been\n   * selected. If there's no `<select>` element matching `selector`, the method\n   * throws an error.\n   *\n   * @example\n   * ```js\n   * handle.select('blue'); // single selection\n   * handle.select('red', 'green', 'blue'); // multiple selections\n   * ```\n   * @param values - Values of options to select. If the `<select>` has the\n   *    `multiple` attribute, all values are considered, otherwise only the first\n   *    one is taken into account.\n   */\n\n\n  select(...values) {\n    var _this17 = this;\n\n    return _asyncToGenerator(function* () {\n      for (const value of values) assert_js_1.assert(helper_js_1.helper.isString(value), 'Values must be strings. Found value \"' + value + '\" of type \"' + typeof value + '\"');\n\n      return _this17.evaluate((element, values) => {\n        if (!(element instanceof HTMLSelectElement)) throw new Error('Element is not a <select> element.');\n        const options = Array.from(element.options);\n        element.value = undefined;\n\n        for (const option of options) {\n          option.selected = values.includes(option.value);\n          if (option.selected && !element.multiple) break;\n        }\n\n        element.dispatchEvent(new Event('input', {\n          bubbles: true\n        }));\n        element.dispatchEvent(new Event('change', {\n          bubbles: true\n        }));\n        return options.filter(option => option.selected).map(option => option.value);\n      }, values);\n    })();\n  }\n  /**\n   * This method expects `elementHandle` to point to an\n   * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input | input element}.\n   * @param filePaths - Sets the value of the file input to these paths.\n   *    If some of the  `filePaths` are relative paths, then they are resolved\n   *    relative to the {@link https://nodejs.org/api/process.html#process_process_cwd | current working directory}\n   */\n\n\n  uploadFile(...filePaths) {\n    var _this18 = this;\n\n    return _asyncToGenerator(function* () {\n      const isMultiple = yield _this18.evaluate(element => {\n        if (!(element instanceof HTMLInputElement)) {\n          throw new Error('uploadFile can only be called on an input element.');\n        }\n\n        return element.multiple;\n      });\n      assert_js_1.assert(filePaths.length <= 1 || isMultiple, 'Multiple file uploads only work with <input type=file multiple>');\n\n      if (!environment_js_1.isNode) {\n        throw new Error(`JSHandle#uploadFile can only be used in Node environments.`);\n      }\n      /*\n       This import is only needed for `uploadFile`, so keep it scoped here to\n       avoid paying the cost unnecessarily.\n      */\n\n\n      const path = yield Promise.resolve().then(() => __importStar(require('path')));\n      const fs = yield helper_js_1.helper.importFSModule(); // Locate all files and confirm that they exist.\n\n      const files = yield Promise.all(filePaths.map( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (filePath) {\n          const resolvedPath = path.resolve(filePath);\n\n          try {\n            yield fs.promises.access(resolvedPath, fs.constants.R_OK);\n          } catch (error) {\n            if (error.code === 'ENOENT') throw new Error(`${filePath} does not exist or is not readable`);\n          }\n\n          return resolvedPath;\n        });\n\n        return function (_x3) {\n          return _ref2.apply(this, arguments);\n        };\n      }()));\n      const {\n        objectId\n      } = _this18._remoteObject;\n      const {\n        node\n      } = yield _this18._client.send('DOM.describeNode', {\n        objectId\n      });\n      const {\n        backendNodeId\n      } = node;\n      /*  The zero-length array is a special case, it seems that\n          DOM.setFileInputFiles does not actually update the files in that case,\n          so the solution is to eval the element value to a new FileList directly.\n      */\n\n      if (files.length === 0) {\n        yield _this18.evaluate(element => {\n          element.files = new DataTransfer().files; // Dispatch events for this case because it should behave akin to a user action.\n\n          element.dispatchEvent(new Event('input', {\n            bubbles: true\n          }));\n          element.dispatchEvent(new Event('change', {\n            bubbles: true\n          }));\n        });\n      } else {\n        yield _this18._client.send('DOM.setFileInputFiles', {\n          objectId,\n          files,\n          backendNodeId\n        });\n      }\n    })();\n  }\n  /**\n   * This method scrolls element into view if needed, and then uses\n   * {@link Touchscreen.tap} to tap in the center of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n\n\n  tap() {\n    var _this19 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this19._scrollIntoViewIfNeeded();\n      const {\n        x,\n        y\n      } = yield _this19.clickablePoint();\n      yield _this19._page.touchscreen.tap(x, y);\n    })();\n  }\n  /**\n   * Calls {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus | focus} on the element.\n   */\n\n\n  focus() {\n    var _this20 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this20.evaluate(element => element.focus());\n    })();\n  }\n  /**\n   * Focuses the element, and then sends a `keydown`, `keypress`/`input`, and\n   * `keyup` event for each character in the text.\n   *\n   * To press a special key, like `Control` or `ArrowDown`,\n   * use {@link ElementHandle.press}.\n   *\n   * @example\n   * ```js\n   * await elementHandle.type('Hello'); // Types instantly\n   * await elementHandle.type('World', {delay: 100}); // Types slower, like a user\n   * ```\n   *\n   * @example\n   * An example of typing into a text field and then submitting the form:\n   *\n   * ```js\n   * const elementHandle = await page.$('input');\n   * await elementHandle.type('some text');\n   * await elementHandle.press('Enter');\n   * ```\n   */\n\n\n  type(text, options) {\n    var _this21 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this21.focus();\n      yield _this21._page.keyboard.type(text, options);\n    })();\n  }\n  /**\n   * Focuses the element, and then uses {@link Keyboard.down} and {@link Keyboard.up}.\n   *\n   * @remarks\n   * If `key` is a single character and no modifier keys besides `Shift`\n   * are being held down, a `keypress`/`input` event will also be generated.\n   * The `text` option can be specified to force an input event to be generated.\n   *\n   * **NOTE** Modifier keys DO affect `elementHandle.press`. Holding down `Shift`\n   * will type the text in upper case.\n   *\n   * @param key - Name of key to press, such as `ArrowLeft`.\n   *    See {@link KeyInput} for a list of all key names.\n   */\n\n\n  press(key, options) {\n    var _this22 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this22.focus();\n      yield _this22._page.keyboard.press(key, options);\n    })();\n  }\n  /**\n   * This method returns the bounding box of the element (relative to the main frame),\n   * or `null` if the element is not visible.\n   */\n\n\n  boundingBox() {\n    var _this23 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = yield _this23._getBoxModel();\n      if (!result) return null;\n      const quad = result.model.border;\n      const x = Math.min(quad[0], quad[2], quad[4], quad[6]);\n      const y = Math.min(quad[1], quad[3], quad[5], quad[7]);\n      const width = Math.max(quad[0], quad[2], quad[4], quad[6]) - x;\n      const height = Math.max(quad[1], quad[3], quad[5], quad[7]) - y;\n      return {\n        x,\n        y,\n        width,\n        height\n      };\n    })();\n  }\n  /**\n   * This method returns boxes of the element, or `null` if the element is not visible.\n   *\n   * @remarks\n   *\n   * Boxes are represented as an array of points;\n   * Each Point is an object `{x, y}`. Box points are sorted clock-wise.\n   */\n\n\n  boxModel() {\n    var _this24 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = yield _this24._getBoxModel();\n      if (!result) return null;\n      const {\n        content,\n        padding,\n        border,\n        margin,\n        width,\n        height\n      } = result.model;\n      return {\n        content: _this24._fromProtocolQuad(content),\n        padding: _this24._fromProtocolQuad(padding),\n        border: _this24._fromProtocolQuad(border),\n        margin: _this24._fromProtocolQuad(margin),\n        width,\n        height\n      };\n    })();\n  }\n  /**\n   * This method scrolls element into view if needed, and then uses\n   * {@link Page.screenshot} to take a screenshot of the element.\n   * If the element is detached from DOM, the method throws an error.\n   */\n\n\n  screenshot(options = {}) {\n    var _this25 = this;\n\n    return _asyncToGenerator(function* () {\n      let needsViewportReset = false;\n      let boundingBox = yield _this25.boundingBox();\n      assert_js_1.assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n\n      const viewport = _this25._page.viewport();\n\n      if (viewport && (boundingBox.width > viewport.width || boundingBox.height > viewport.height)) {\n        const newViewport = {\n          width: Math.max(viewport.width, Math.ceil(boundingBox.width)),\n          height: Math.max(viewport.height, Math.ceil(boundingBox.height))\n        };\n        yield _this25._page.setViewport(Object.assign({}, viewport, newViewport));\n        needsViewportReset = true;\n      }\n\n      yield _this25._scrollIntoViewIfNeeded();\n      boundingBox = yield _this25.boundingBox();\n      assert_js_1.assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n      assert_js_1.assert(boundingBox.width !== 0, 'Node has 0 width.');\n      assert_js_1.assert(boundingBox.height !== 0, 'Node has 0 height.');\n      const layoutMetrics = yield _this25._client.send('Page.getLayoutMetrics'); // Fallback to `layoutViewport` in case of using Firefox.\n\n      const {\n        pageX,\n        pageY\n      } = layoutMetrics.cssLayoutViewport || layoutMetrics.layoutViewport;\n      const clip = Object.assign({}, boundingBox);\n      clip.x += pageX;\n      clip.y += pageY;\n      const imageData = yield _this25._page.screenshot(Object.assign({}, {\n        clip\n      }, options));\n      if (needsViewportReset) yield _this25._page.setViewport(viewport);\n      return imageData;\n    })();\n  }\n  /**\n   * Runs `element.querySelector` within the page. If no element matches the selector,\n   * the return value resolves to `null`.\n   */\n\n\n  $(selector) {\n    var _this26 = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        updatedSelector,\n        queryHandler\n      } = QueryHandler_js_1.getQueryHandlerAndSelector(selector);\n      return queryHandler.queryOne(_this26, updatedSelector);\n    })();\n  }\n  /**\n   * Runs `element.querySelectorAll` within the page. If no elements match the selector,\n   * the return value resolves to `[]`.\n   */\n\n\n  $$(selector) {\n    var _this27 = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        updatedSelector,\n        queryHandler\n      } = QueryHandler_js_1.getQueryHandlerAndSelector(selector);\n      return queryHandler.queryAll(_this27, updatedSelector);\n    })();\n  }\n  /**\n   * This method runs `document.querySelector` within the element and passes it as\n   * the first argument to `pageFunction`. If there's no element matching `selector`,\n   * the method throws an error.\n   *\n   * If `pageFunction` returns a Promise, then `frame.$eval` would wait for the promise\n   * to resolve and return its value.\n   *\n   * @example\n   * ```js\n   * const tweetHandle = await page.$('.tweet');\n   * expect(await tweetHandle.$eval('.like', node => node.innerText)).toBe('100');\n   * expect(await tweetHandle.$eval('.retweets', node => node.innerText)).toBe('10');\n   * ```\n   */\n\n\n  $eval(selector, pageFunction, ...args) {\n    var _this28 = this;\n\n    return _asyncToGenerator(function* () {\n      const elementHandle = yield _this28.$(selector);\n      if (!elementHandle) throw new Error(`Error: failed to find element matching selector \"${selector}\"`);\n      const result = yield elementHandle.evaluate(pageFunction, ...args);\n      yield elementHandle.dispose();\n      /**\n       * This `as` is a little unfortunate but helps TS understand the behavior of\n       * `elementHandle.evaluate`. If evaluate returns an element it will return an\n       * ElementHandle instance, rather than the plain object. All the\n       * WrapElementHandle type does is wrap ReturnType into\n       * ElementHandle<ReturnType> if it is an ElementHandle, or leave it alone as\n       * ReturnType if it isn't.\n       */\n\n      return result;\n    })();\n  }\n  /**\n   * This method runs `document.querySelectorAll` within the element and passes it as\n   * the first argument to `pageFunction`. If there's no element matching `selector`,\n   * the method throws an error.\n   *\n   * If `pageFunction` returns a Promise, then `frame.$$eval` would wait for the\n   * promise to resolve and return its value.\n   *\n   * @example\n   * ```html\n   * <div class=\"feed\">\n   *   <div class=\"tweet\">Hello!</div>\n   *   <div class=\"tweet\">Hi!</div>\n   * </div>\n   * ```\n   *\n   * @example\n   * ```js\n   * const feedHandle = await page.$('.feed');\n   * expect(await feedHandle.$$eval('.tweet', nodes => nodes.map(n => n.innerText)))\n   *  .toEqual(['Hello!', 'Hi!']);\n   * ```\n   */\n\n\n  $$eval(selector, pageFunction, ...args) {\n    var _this29 = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        updatedSelector,\n        queryHandler\n      } = QueryHandler_js_1.getQueryHandlerAndSelector(selector);\n      const arrayHandle = yield queryHandler.queryAllArray(_this29, updatedSelector);\n      const result = yield arrayHandle.evaluate(pageFunction, ...args);\n      yield arrayHandle.dispose();\n      /* This `as` exists for the same reason as the `as` in $eval above.\n       * See the comment there for a full explanation.\n       */\n\n      return result;\n    })();\n  }\n  /**\n   * The method evaluates the XPath expression relative to the elementHandle.\n   * If there are no such elements, the method will resolve to an empty array.\n   * @param expression - Expression to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate | evaluate}\n   */\n\n\n  $x(expression) {\n    var _this30 = this;\n\n    return _asyncToGenerator(function* () {\n      const arrayHandle = yield _this30.evaluateHandle((element, expression) => {\n        const document = element.ownerDocument || element;\n        const iterator = document.evaluate(expression, element, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n        const array = [];\n        let item;\n\n        while (item = iterator.iterateNext()) array.push(item);\n\n        return array;\n      }, expression);\n      const properties = yield arrayHandle.getProperties();\n      yield arrayHandle.dispose();\n      const result = [];\n\n      for (const property of properties.values()) {\n        const elementHandle = property.asElement();\n        if (elementHandle) result.push(elementHandle);\n      }\n\n      return result;\n    })();\n  }\n  /**\n   * Resolves to true if the element is visible in the current viewport.\n   */\n\n\n  isIntersectingViewport() {\n    var _this31 = this;\n\n    return _asyncToGenerator(function* () {\n      return yield _this31.evaluate( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator(function* (element) {\n          const visibleRatio = yield new Promise(resolve => {\n            const observer = new IntersectionObserver(entries => {\n              resolve(entries[0].intersectionRatio);\n              observer.disconnect();\n            });\n            observer.observe(element);\n          });\n          return visibleRatio > 0;\n        });\n\n        return function (_x4) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n\n}\n\nexports.ElementHandle = ElementHandle;\n\nfunction computeQuadArea(quad) {\n  /* Compute sum of all directed areas of adjacent triangles\n    https://en.wikipedia.org/wiki/Polygon#Simple_polygons\n  */\n  let area = 0;\n\n  for (let i = 0; i < quad.length; ++i) {\n    const p1 = quad[i];\n    const p2 = quad[(i + 1) % quad.length];\n    area += (p1.x * p2.y - p2.x * p1.y) / 2;\n  }\n\n  return Math.abs(area);\n}","map":{"version":3,"sources":["C:/Users/Matth/workspace/node_modules/puppeteer/lib/cjs/puppeteer/common/JSHandle.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","exports","ElementHandle","JSHandle","createJSHandle","assert_js_1","require","helper_js_1","QueryHandler_js_1","environment_js_1","context","remoteObject","frame","subtype","frameManager","_frameManager","_client","page","constructor","client","_disposed","_context","_remoteObject","executionContext","evaluate","pageFunction","args","evaluateHandle","getProperty","propertyName","objectHandle","object","__proto__","properties","getProperties","dispose","response","send","objectId","ownProperties","Map","property","set","name","jsonValue","functionDeclaration","returnByValue","awaitPromise","helper","valueFromRemoteObject","asElement","releaseObject","toString","type","_page","contentFrame","nodeInfo","node","frameId","_scrollIntoViewIfNeeded","error","element","pageJavascriptEnabled","isConnected","nodeType","Node","ELEMENT_NODE","scrollIntoView","block","inline","behavior","visibleRatio","Promise","resolve","observer","IntersectionObserver","entries","intersectionRatio","disconnect","observe","isJavaScriptEnabled","Error","clickablePoint","layoutMetrics","all","catch","debugError","quads","length","clientWidth","clientHeight","cssLayoutViewport","layoutViewport","map","quad","_fromProtocolQuad","_intersectQuadWithViewport","filter","computeQuadArea","x","y","point","_getBoxModel","params","width","height","Math","min","max","hover","mouse","move","click","options","drag","target","assert","isDragInterceptionEnabled","start","dragEnter","data","items","dragOperationsMask","dragOver","drop","destination","dragAndDrop","startPoint","targetPoint","select","values","isString","HTMLSelectElement","Array","from","option","selected","includes","multiple","dispatchEvent","Event","bubbles","uploadFile","filePaths","isMultiple","HTMLInputElement","isNode","path","then","fs","importFSModule","files","filePath","resolvedPath","promises","access","constants","R_OK","code","backendNodeId","DataTransfer","tap","touchscreen","focus","text","keyboard","press","key","boundingBox","model","border","boxModel","content","padding","margin","screenshot","needsViewportReset","viewport","newViewport","ceil","setViewport","assign","pageX","pageY","clip","imageData","$","selector","updatedSelector","queryHandler","getQueryHandlerAndSelector","queryOne","$$","queryAll","$eval","elementHandle","$$eval","arrayHandle","queryAllArray","$x","expression","document","ownerDocument","iterator","XPathResult","ORDERED_NODE_ITERATOR_TYPE","array","item","iterateNext","push","isIntersectingViewport","area","i","p1","p2","abs"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ElementHandle = exports.JSHandle = exports.createJSHandle = void 0;\nconst assert_js_1 = require(\"./assert.js\");\nconst helper_js_1 = require(\"./helper.js\");\nconst QueryHandler_js_1 = require(\"./QueryHandler.js\");\nconst environment_js_1 = require(\"../environment.js\");\n/**\n * @internal\n */\nfunction createJSHandle(context, remoteObject) {\n    const frame = context.frame();\n    if (remoteObject.subtype === 'node' && frame) {\n        const frameManager = frame._frameManager;\n        return new ElementHandle(context, context._client, remoteObject, frameManager.page(), frameManager);\n    }\n    return new JSHandle(context, context._client, remoteObject);\n}\nexports.createJSHandle = createJSHandle;\n/**\n * Represents an in-page JavaScript object. JSHandles can be created with the\n * {@link Page.evaluateHandle | page.evaluateHandle} method.\n *\n * @example\n * ```js\n * const windowHandle = await page.evaluateHandle(() => window);\n * ```\n *\n * JSHandle prevents the referenced JavaScript object from being garbage-collected\n * unless the handle is {@link JSHandle.dispose | disposed}. JSHandles are auto-\n * disposed when their origin frame gets navigated or the parent context gets destroyed.\n *\n * JSHandle instances can be used as arguments for {@link Page.$eval},\n * {@link Page.evaluate}, and {@link Page.evaluateHandle}.\n *\n * @public\n */\nclass JSHandle {\n    /**\n     * @internal\n     */\n    constructor(context, client, remoteObject) {\n        /**\n         * @internal\n         */\n        this._disposed = false;\n        this._context = context;\n        this._client = client;\n        this._remoteObject = remoteObject;\n    }\n    /** Returns the execution context the handle belongs to.\n     */\n    executionContext() {\n        return this._context;\n    }\n    /**\n     * This method passes this handle as the first argument to `pageFunction`.\n     * If `pageFunction` returns a Promise, then `handle.evaluate` would wait\n     * for the promise to resolve and return its value.\n     *\n     * @example\n     * ```js\n     * const tweetHandle = await page.$('.tweet .retweets');\n     * expect(await tweetHandle.evaluate(node => node.innerText)).toBe('10');\n     * ```\n     */\n    async evaluate(pageFunction, ...args) {\n        return await this.executionContext().evaluate(pageFunction, this, ...args);\n    }\n    /**\n     * This method passes this handle as the first argument to `pageFunction`.\n     *\n     * @remarks\n     *\n     * The only difference between `jsHandle.evaluate` and\n     * `jsHandle.evaluateHandle` is that `jsHandle.evaluateHandle`\n     * returns an in-page object (JSHandle).\n     *\n     * If the function passed to `jsHandle.evaluateHandle` returns a Promise,\n     * then `evaluateHandle.evaluateHandle` waits for the promise to resolve and\n     * returns its value.\n     *\n     * See {@link Page.evaluateHandle} for more details.\n     */\n    async evaluateHandle(pageFunction, ...args) {\n        return await this.executionContext().evaluateHandle(pageFunction, this, ...args);\n    }\n    /** Fetches a single property from the referenced object.\n     */\n    async getProperty(propertyName) {\n        const objectHandle = await this.evaluateHandle((object, propertyName) => {\n            const result = { __proto__: null };\n            result[propertyName] = object[propertyName];\n            return result;\n        }, propertyName);\n        const properties = await objectHandle.getProperties();\n        const result = properties.get(propertyName) || null;\n        await objectHandle.dispose();\n        return result;\n    }\n    /**\n     * The method returns a map with property names as keys and JSHandle\n     * instances for the property values.\n     *\n     * @example\n     * ```js\n     * const listHandle = await page.evaluateHandle(() => document.body.children);\n     * const properties = await listHandle.getProperties();\n     * const children = [];\n     * for (const property of properties.values()) {\n     *   const element = property.asElement();\n     *   if (element)\n     *     children.push(element);\n     * }\n     * children; // holds elementHandles to all children of document.body\n     * ```\n     */\n    async getProperties() {\n        const response = await this._client.send('Runtime.getProperties', {\n            objectId: this._remoteObject.objectId,\n            ownProperties: true,\n        });\n        const result = new Map();\n        for (const property of response.result) {\n            if (!property.enumerable)\n                continue;\n            result.set(property.name, createJSHandle(this._context, property.value));\n        }\n        return result;\n    }\n    /**\n     * @returns Returns a JSON representation of the object.If the object has a\n     * `toJSON` function, it will not be called.\n     * @remarks\n     *\n     * The JSON is generated by running {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify | JSON.stringify}\n     * on the object in page and consequent {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse | JSON.parse} in puppeteer.\n     * **NOTE** The method throws if the referenced object is not stringifiable.\n     */\n    async jsonValue() {\n        if (this._remoteObject.objectId) {\n            const response = await this._client.send('Runtime.callFunctionOn', {\n                functionDeclaration: 'function() { return this; }',\n                objectId: this._remoteObject.objectId,\n                returnByValue: true,\n                awaitPromise: true,\n            });\n            return helper_js_1.helper.valueFromRemoteObject(response.result);\n        }\n        return helper_js_1.helper.valueFromRemoteObject(this._remoteObject);\n    }\n    /**\n     * @returns Either `null` or the object handle itself, if the object\n     * handle is an instance of {@link ElementHandle}.\n     */\n    asElement() {\n        /*  This always returns null, but subclasses can override this and return an\n            ElementHandle.\n        */\n        return null;\n    }\n    /**\n     * Stops referencing the element handle, and resolves when the object handle is\n     * successfully disposed of.\n     */\n    async dispose() {\n        if (this._disposed)\n            return;\n        this._disposed = true;\n        await helper_js_1.helper.releaseObject(this._client, this._remoteObject);\n    }\n    /**\n     * Returns a string representation of the JSHandle.\n     *\n     * @remarks Useful during debugging.\n     */\n    toString() {\n        if (this._remoteObject.objectId) {\n            const type = this._remoteObject.subtype || this._remoteObject.type;\n            return 'JSHandle@' + type;\n        }\n        return 'JSHandle:' + helper_js_1.helper.valueFromRemoteObject(this._remoteObject);\n    }\n}\nexports.JSHandle = JSHandle;\n/**\n * ElementHandle represents an in-page DOM element.\n *\n * @remarks\n *\n * ElementHandles can be created with the {@link Page.$} method.\n *\n * ```js\n * const puppeteer = require('puppeteer');\n *\n * (async () => {\n *  const browser = await puppeteer.launch();\n *  const page = await browser.newPage();\n *  await page.goto('https://example.com');\n *  const hrefElement = await page.$('a');\n *  await hrefElement.click();\n *  // ...\n * })();\n * ```\n *\n * ElementHandle prevents the DOM element from being garbage-collected unless the\n * handle is {@link JSHandle.dispose | disposed}. ElementHandles are auto-disposed\n * when their origin frame gets navigated.\n *\n * ElementHandle instances can be used as arguments in {@link Page.$eval} and\n * {@link Page.evaluate} methods.\n *\n * If you're using TypeScript, ElementHandle takes a generic argument that\n * denotes the type of element the handle is holding within. For example, if you\n * have a handle to a `<select>` element, you can type it as\n * `ElementHandle<HTMLSelectElement>` and you get some nicer type checks.\n *\n * @public\n */\nclass ElementHandle extends JSHandle {\n    /**\n     * @internal\n     */\n    constructor(context, client, remoteObject, page, frameManager) {\n        super(context, client, remoteObject);\n        this._client = client;\n        this._remoteObject = remoteObject;\n        this._page = page;\n        this._frameManager = frameManager;\n    }\n    asElement() {\n        return this;\n    }\n    /**\n     * Resolves to the content frame for element handles referencing\n     * iframe nodes, or null otherwise\n     */\n    async contentFrame() {\n        const nodeInfo = await this._client.send('DOM.describeNode', {\n            objectId: this._remoteObject.objectId,\n        });\n        if (typeof nodeInfo.node.frameId !== 'string')\n            return null;\n        return this._frameManager.frame(nodeInfo.node.frameId);\n    }\n    async _scrollIntoViewIfNeeded() {\n        const error = await this.evaluate(async (element, pageJavascriptEnabled) => {\n            if (!element.isConnected)\n                return 'Node is detached from document';\n            if (element.nodeType !== Node.ELEMENT_NODE)\n                return 'Node is not of type HTMLElement';\n            // force-scroll if page's javascript is disabled.\n            if (!pageJavascriptEnabled) {\n                element.scrollIntoView({\n                    block: 'center',\n                    inline: 'center',\n                    // @ts-expect-error Chrome still supports behavior: instant but\n                    // it's not in the spec so TS shouts We don't want to make this\n                    // breaking change in Puppeteer yet so we'll ignore the line.\n                    behavior: 'instant',\n                });\n                return false;\n            }\n            const visibleRatio = await new Promise((resolve) => {\n                const observer = new IntersectionObserver((entries) => {\n                    resolve(entries[0].intersectionRatio);\n                    observer.disconnect();\n                });\n                observer.observe(element);\n            });\n            if (visibleRatio !== 1.0) {\n                element.scrollIntoView({\n                    block: 'center',\n                    inline: 'center',\n                    // @ts-expect-error Chrome still supports behavior: instant but\n                    // it's not in the spec so TS shouts We don't want to make this\n                    // breaking change in Puppeteer yet so we'll ignore the line.\n                    behavior: 'instant',\n                });\n            }\n            return false;\n        }, this._page.isJavaScriptEnabled());\n        if (error)\n            throw new Error(error);\n    }\n    async clickablePoint() {\n        const [result, layoutMetrics] = await Promise.all([\n            this._client\n                .send('DOM.getContentQuads', {\n                objectId: this._remoteObject.objectId,\n            })\n                .catch(helper_js_1.debugError),\n            this._client.send('Page.getLayoutMetrics'),\n        ]);\n        if (!result || !result.quads.length)\n            throw new Error('Node is either not visible or not an HTMLElement');\n        // Filter out quads that have too small area to click into.\n        // Fallback to `layoutViewport` in case of using Firefox.\n        const { clientWidth, clientHeight } = layoutMetrics.cssLayoutViewport || layoutMetrics.layoutViewport;\n        const quads = result.quads\n            .map((quad) => this._fromProtocolQuad(quad))\n            .map((quad) => this._intersectQuadWithViewport(quad, clientWidth, clientHeight))\n            .filter((quad) => computeQuadArea(quad) > 1);\n        if (!quads.length)\n            throw new Error('Node is either not visible or not an HTMLElement');\n        // Return the middle point of the first quad.\n        const quad = quads[0];\n        let x = 0;\n        let y = 0;\n        for (const point of quad) {\n            x += point.x;\n            y += point.y;\n        }\n        return {\n            x: x / 4,\n            y: y / 4,\n        };\n    }\n    _getBoxModel() {\n        const params = {\n            objectId: this._remoteObject.objectId,\n        };\n        return this._client\n            .send('DOM.getBoxModel', params)\n            .catch((error) => helper_js_1.debugError(error));\n    }\n    _fromProtocolQuad(quad) {\n        return [\n            { x: quad[0], y: quad[1] },\n            { x: quad[2], y: quad[3] },\n            { x: quad[4], y: quad[5] },\n            { x: quad[6], y: quad[7] },\n        ];\n    }\n    _intersectQuadWithViewport(quad, width, height) {\n        return quad.map((point) => ({\n            x: Math.min(Math.max(point.x, 0), width),\n            y: Math.min(Math.max(point.y, 0), height),\n        }));\n    }\n    /**\n     * This method scrolls element into view if needed, and then\n     * uses {@link Page.mouse} to hover over the center of the element.\n     * If the element is detached from DOM, the method throws an error.\n     */\n    async hover() {\n        await this._scrollIntoViewIfNeeded();\n        const { x, y } = await this.clickablePoint();\n        await this._page.mouse.move(x, y);\n    }\n    /**\n     * This method scrolls element into view if needed, and then\n     * uses {@link Page.mouse} to click in the center of the element.\n     * If the element is detached from DOM, the method throws an error.\n     */\n    async click(options = {}) {\n        await this._scrollIntoViewIfNeeded();\n        const { x, y } = await this.clickablePoint();\n        await this._page.mouse.click(x, y, options);\n    }\n    /**\n     * This method creates and captures a dragevent from the element.\n     */\n    async drag(target) {\n        assert_js_1.assert(this._page.isDragInterceptionEnabled(), 'Drag Interception is not enabled!');\n        await this._scrollIntoViewIfNeeded();\n        const start = await this.clickablePoint();\n        return await this._page.mouse.drag(start, target);\n    }\n    /**\n     * This method creates a `dragenter` event on the element.\n     */\n    async dragEnter(data = { items: [], dragOperationsMask: 1 }) {\n        await this._scrollIntoViewIfNeeded();\n        const target = await this.clickablePoint();\n        await this._page.mouse.dragEnter(target, data);\n    }\n    /**\n     * This method creates a `dragover` event on the element.\n     */\n    async dragOver(data = { items: [], dragOperationsMask: 1 }) {\n        await this._scrollIntoViewIfNeeded();\n        const target = await this.clickablePoint();\n        await this._page.mouse.dragOver(target, data);\n    }\n    /**\n     * This method triggers a drop on the element.\n     */\n    async drop(data = { items: [], dragOperationsMask: 1 }) {\n        await this._scrollIntoViewIfNeeded();\n        const destination = await this.clickablePoint();\n        await this._page.mouse.drop(destination, data);\n    }\n    /**\n     * This method triggers a dragenter, dragover, and drop on the element.\n     */\n    async dragAndDrop(target, options) {\n        await this._scrollIntoViewIfNeeded();\n        const startPoint = await this.clickablePoint();\n        const targetPoint = await target.clickablePoint();\n        await this._page.mouse.dragAndDrop(startPoint, targetPoint, options);\n    }\n    /**\n     * Triggers a `change` and `input` event once all the provided options have been\n     * selected. If there's no `<select>` element matching `selector`, the method\n     * throws an error.\n     *\n     * @example\n     * ```js\n     * handle.select('blue'); // single selection\n     * handle.select('red', 'green', 'blue'); // multiple selections\n     * ```\n     * @param values - Values of options to select. If the `<select>` has the\n     *    `multiple` attribute, all values are considered, otherwise only the first\n     *    one is taken into account.\n     */\n    async select(...values) {\n        for (const value of values)\n            assert_js_1.assert(helper_js_1.helper.isString(value), 'Values must be strings. Found value \"' +\n                value +\n                '\" of type \"' +\n                typeof value +\n                '\"');\n        return this.evaluate((element, values) => {\n            if (!(element instanceof HTMLSelectElement))\n                throw new Error('Element is not a <select> element.');\n            const options = Array.from(element.options);\n            element.value = undefined;\n            for (const option of options) {\n                option.selected = values.includes(option.value);\n                if (option.selected && !element.multiple)\n                    break;\n            }\n            element.dispatchEvent(new Event('input', { bubbles: true }));\n            element.dispatchEvent(new Event('change', { bubbles: true }));\n            return options\n                .filter((option) => option.selected)\n                .map((option) => option.value);\n        }, values);\n    }\n    /**\n     * This method expects `elementHandle` to point to an\n     * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input | input element}.\n     * @param filePaths - Sets the value of the file input to these paths.\n     *    If some of the  `filePaths` are relative paths, then they are resolved\n     *    relative to the {@link https://nodejs.org/api/process.html#process_process_cwd | current working directory}\n     */\n    async uploadFile(...filePaths) {\n        const isMultiple = await this.evaluate((element) => {\n            if (!(element instanceof HTMLInputElement)) {\n                throw new Error('uploadFile can only be called on an input element.');\n            }\n            return element.multiple;\n        });\n        assert_js_1.assert(filePaths.length <= 1 || isMultiple, 'Multiple file uploads only work with <input type=file multiple>');\n        if (!environment_js_1.isNode) {\n            throw new Error(`JSHandle#uploadFile can only be used in Node environments.`);\n        }\n        /*\n         This import is only needed for `uploadFile`, so keep it scoped here to\n         avoid paying the cost unnecessarily.\n        */\n        const path = await Promise.resolve().then(() => __importStar(require('path')));\n        const fs = await helper_js_1.helper.importFSModule();\n        // Locate all files and confirm that they exist.\n        const files = await Promise.all(filePaths.map(async (filePath) => {\n            const resolvedPath = path.resolve(filePath);\n            try {\n                await fs.promises.access(resolvedPath, fs.constants.R_OK);\n            }\n            catch (error) {\n                if (error.code === 'ENOENT')\n                    throw new Error(`${filePath} does not exist or is not readable`);\n            }\n            return resolvedPath;\n        }));\n        const { objectId } = this._remoteObject;\n        const { node } = await this._client.send('DOM.describeNode', { objectId });\n        const { backendNodeId } = node;\n        /*  The zero-length array is a special case, it seems that\n            DOM.setFileInputFiles does not actually update the files in that case,\n            so the solution is to eval the element value to a new FileList directly.\n        */\n        if (files.length === 0) {\n            await this.evaluate((element) => {\n                element.files = new DataTransfer().files;\n                // Dispatch events for this case because it should behave akin to a user action.\n                element.dispatchEvent(new Event('input', { bubbles: true }));\n                element.dispatchEvent(new Event('change', { bubbles: true }));\n            });\n        }\n        else {\n            await this._client.send('DOM.setFileInputFiles', {\n                objectId,\n                files,\n                backendNodeId,\n            });\n        }\n    }\n    /**\n     * This method scrolls element into view if needed, and then uses\n     * {@link Touchscreen.tap} to tap in the center of the element.\n     * If the element is detached from DOM, the method throws an error.\n     */\n    async tap() {\n        await this._scrollIntoViewIfNeeded();\n        const { x, y } = await this.clickablePoint();\n        await this._page.touchscreen.tap(x, y);\n    }\n    /**\n     * Calls {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus | focus} on the element.\n     */\n    async focus() {\n        await this.evaluate((element) => element.focus());\n    }\n    /**\n     * Focuses the element, and then sends a `keydown`, `keypress`/`input`, and\n     * `keyup` event for each character in the text.\n     *\n     * To press a special key, like `Control` or `ArrowDown`,\n     * use {@link ElementHandle.press}.\n     *\n     * @example\n     * ```js\n     * await elementHandle.type('Hello'); // Types instantly\n     * await elementHandle.type('World', {delay: 100}); // Types slower, like a user\n     * ```\n     *\n     * @example\n     * An example of typing into a text field and then submitting the form:\n     *\n     * ```js\n     * const elementHandle = await page.$('input');\n     * await elementHandle.type('some text');\n     * await elementHandle.press('Enter');\n     * ```\n     */\n    async type(text, options) {\n        await this.focus();\n        await this._page.keyboard.type(text, options);\n    }\n    /**\n     * Focuses the element, and then uses {@link Keyboard.down} and {@link Keyboard.up}.\n     *\n     * @remarks\n     * If `key` is a single character and no modifier keys besides `Shift`\n     * are being held down, a `keypress`/`input` event will also be generated.\n     * The `text` option can be specified to force an input event to be generated.\n     *\n     * **NOTE** Modifier keys DO affect `elementHandle.press`. Holding down `Shift`\n     * will type the text in upper case.\n     *\n     * @param key - Name of key to press, such as `ArrowLeft`.\n     *    See {@link KeyInput} for a list of all key names.\n     */\n    async press(key, options) {\n        await this.focus();\n        await this._page.keyboard.press(key, options);\n    }\n    /**\n     * This method returns the bounding box of the element (relative to the main frame),\n     * or `null` if the element is not visible.\n     */\n    async boundingBox() {\n        const result = await this._getBoxModel();\n        if (!result)\n            return null;\n        const quad = result.model.border;\n        const x = Math.min(quad[0], quad[2], quad[4], quad[6]);\n        const y = Math.min(quad[1], quad[3], quad[5], quad[7]);\n        const width = Math.max(quad[0], quad[2], quad[4], quad[6]) - x;\n        const height = Math.max(quad[1], quad[3], quad[5], quad[7]) - y;\n        return { x, y, width, height };\n    }\n    /**\n     * This method returns boxes of the element, or `null` if the element is not visible.\n     *\n     * @remarks\n     *\n     * Boxes are represented as an array of points;\n     * Each Point is an object `{x, y}`. Box points are sorted clock-wise.\n     */\n    async boxModel() {\n        const result = await this._getBoxModel();\n        if (!result)\n            return null;\n        const { content, padding, border, margin, width, height } = result.model;\n        return {\n            content: this._fromProtocolQuad(content),\n            padding: this._fromProtocolQuad(padding),\n            border: this._fromProtocolQuad(border),\n            margin: this._fromProtocolQuad(margin),\n            width,\n            height,\n        };\n    }\n    /**\n     * This method scrolls element into view if needed, and then uses\n     * {@link Page.screenshot} to take a screenshot of the element.\n     * If the element is detached from DOM, the method throws an error.\n     */\n    async screenshot(options = {}) {\n        let needsViewportReset = false;\n        let boundingBox = await this.boundingBox();\n        assert_js_1.assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n        const viewport = this._page.viewport();\n        if (viewport &&\n            (boundingBox.width > viewport.width ||\n                boundingBox.height > viewport.height)) {\n            const newViewport = {\n                width: Math.max(viewport.width, Math.ceil(boundingBox.width)),\n                height: Math.max(viewport.height, Math.ceil(boundingBox.height)),\n            };\n            await this._page.setViewport(Object.assign({}, viewport, newViewport));\n            needsViewportReset = true;\n        }\n        await this._scrollIntoViewIfNeeded();\n        boundingBox = await this.boundingBox();\n        assert_js_1.assert(boundingBox, 'Node is either not visible or not an HTMLElement');\n        assert_js_1.assert(boundingBox.width !== 0, 'Node has 0 width.');\n        assert_js_1.assert(boundingBox.height !== 0, 'Node has 0 height.');\n        const layoutMetrics = await this._client.send('Page.getLayoutMetrics');\n        // Fallback to `layoutViewport` in case of using Firefox.\n        const { pageX, pageY } = layoutMetrics.cssLayoutViewport || layoutMetrics.layoutViewport;\n        const clip = Object.assign({}, boundingBox);\n        clip.x += pageX;\n        clip.y += pageY;\n        const imageData = await this._page.screenshot(Object.assign({}, {\n            clip,\n        }, options));\n        if (needsViewportReset)\n            await this._page.setViewport(viewport);\n        return imageData;\n    }\n    /**\n     * Runs `element.querySelector` within the page. If no element matches the selector,\n     * the return value resolves to `null`.\n     */\n    async $(selector) {\n        const { updatedSelector, queryHandler } = QueryHandler_js_1.getQueryHandlerAndSelector(selector);\n        return queryHandler.queryOne(this, updatedSelector);\n    }\n    /**\n     * Runs `element.querySelectorAll` within the page. If no elements match the selector,\n     * the return value resolves to `[]`.\n     */\n    async $$(selector) {\n        const { updatedSelector, queryHandler } = QueryHandler_js_1.getQueryHandlerAndSelector(selector);\n        return queryHandler.queryAll(this, updatedSelector);\n    }\n    /**\n     * This method runs `document.querySelector` within the element and passes it as\n     * the first argument to `pageFunction`. If there's no element matching `selector`,\n     * the method throws an error.\n     *\n     * If `pageFunction` returns a Promise, then `frame.$eval` would wait for the promise\n     * to resolve and return its value.\n     *\n     * @example\n     * ```js\n     * const tweetHandle = await page.$('.tweet');\n     * expect(await tweetHandle.$eval('.like', node => node.innerText)).toBe('100');\n     * expect(await tweetHandle.$eval('.retweets', node => node.innerText)).toBe('10');\n     * ```\n     */\n    async $eval(selector, pageFunction, ...args) {\n        const elementHandle = await this.$(selector);\n        if (!elementHandle)\n            throw new Error(`Error: failed to find element matching selector \"${selector}\"`);\n        const result = await elementHandle.evaluate(pageFunction, ...args);\n        await elementHandle.dispose();\n        /**\n         * This `as` is a little unfortunate but helps TS understand the behavior of\n         * `elementHandle.evaluate`. If evaluate returns an element it will return an\n         * ElementHandle instance, rather than the plain object. All the\n         * WrapElementHandle type does is wrap ReturnType into\n         * ElementHandle<ReturnType> if it is an ElementHandle, or leave it alone as\n         * ReturnType if it isn't.\n         */\n        return result;\n    }\n    /**\n     * This method runs `document.querySelectorAll` within the element and passes it as\n     * the first argument to `pageFunction`. If there's no element matching `selector`,\n     * the method throws an error.\n     *\n     * If `pageFunction` returns a Promise, then `frame.$$eval` would wait for the\n     * promise to resolve and return its value.\n     *\n     * @example\n     * ```html\n     * <div class=\"feed\">\n     *   <div class=\"tweet\">Hello!</div>\n     *   <div class=\"tweet\">Hi!</div>\n     * </div>\n     * ```\n     *\n     * @example\n     * ```js\n     * const feedHandle = await page.$('.feed');\n     * expect(await feedHandle.$$eval('.tweet', nodes => nodes.map(n => n.innerText)))\n     *  .toEqual(['Hello!', 'Hi!']);\n     * ```\n     */\n    async $$eval(selector, pageFunction, ...args) {\n        const { updatedSelector, queryHandler } = QueryHandler_js_1.getQueryHandlerAndSelector(selector);\n        const arrayHandle = await queryHandler.queryAllArray(this, updatedSelector);\n        const result = await arrayHandle.evaluate(pageFunction, ...args);\n        await arrayHandle.dispose();\n        /* This `as` exists for the same reason as the `as` in $eval above.\n         * See the comment there for a full explanation.\n         */\n        return result;\n    }\n    /**\n     * The method evaluates the XPath expression relative to the elementHandle.\n     * If there are no such elements, the method will resolve to an empty array.\n     * @param expression - Expression to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/evaluate | evaluate}\n     */\n    async $x(expression) {\n        const arrayHandle = await this.evaluateHandle((element, expression) => {\n            const document = element.ownerDocument || element;\n            const iterator = document.evaluate(expression, element, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n            const array = [];\n            let item;\n            while ((item = iterator.iterateNext()))\n                array.push(item);\n            return array;\n        }, expression);\n        const properties = await arrayHandle.getProperties();\n        await arrayHandle.dispose();\n        const result = [];\n        for (const property of properties.values()) {\n            const elementHandle = property.asElement();\n            if (elementHandle)\n                result.push(elementHandle);\n        }\n        return result;\n    }\n    /**\n     * Resolves to true if the element is visible in the current viewport.\n     */\n    async isIntersectingViewport() {\n        return await this.evaluate(async (element) => {\n            const visibleRatio = await new Promise((resolve) => {\n                const observer = new IntersectionObserver((entries) => {\n                    resolve(entries[0].intersectionRatio);\n                    observer.disconnect();\n                });\n                observer.observe(element);\n            });\n            return visibleRatio > 0;\n        });\n    }\n}\nexports.ElementHandle = ElementHandle;\nfunction computeQuadArea(quad) {\n    /* Compute sum of all directed areas of adjacent triangles\n      https://en.wikipedia.org/wiki/Polygon#Simple_polygons\n    */\n    let area = 0;\n    for (let i = 0; i < quad.length; ++i) {\n        const p1 = quad[i];\n        const p2 = quad[(i + 1) % quad.length];\n        area += (p1.x * p2.y - p2.x * p1.y) / 2;\n    }\n    return Math.abs(area);\n}\n"]},"metadata":{},"sourceType":"script"}